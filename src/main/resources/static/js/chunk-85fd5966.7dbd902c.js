(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85fd5966"],{"2bb8":function(t,e,o){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,o,a){return e=e||"&",o=o||"=",null===t&&(t=void 0),"object"===typeof t?r(l(t),(function(l){var a=encodeURIComponent(n(l))+o;return i(t[l])?r(t[l],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[l]))})).join(e):a?encodeURIComponent(n(a))+o+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t,e){if(t.map)return t.map(e);for(var o=[],n=0;n<t.length;n++)o.push(e(t[n],n));return o}var l=Object.keys||function(t){var e=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.push(o);return e}},"5ee4":function(t,e,o){"use strict";e.decode=e.parse=o("a2d3"),e.encode=e.stringify=o("2bb8")},a2d3:function(t,e,o){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,o,r){e=e||"&",o=o||"=";var l={};if("string"!==typeof t||0===t.length)return l;var a=/\+/g;t=t.split(e);var s=1e3;r&&"number"===typeof r.maxKeys&&(s=r.maxKeys);var c=t.length;s>0&&c>s&&(c=s);for(var u=0;u<c;++u){var p,d,f,v,m=t[u].replace(a,"%20"),h=m.indexOf(o);h>=0?(p=m.substr(0,h),d=m.substr(h+1)):(p=m,d=""),f=decodeURIComponent(p),v=decodeURIComponent(d),n(l,f)?i(l[f])?l[f].push(v):l[f]=[l[f],v]:l[f]=v}return l};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},f946:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"role_list"},[o("div",{staticClass:"btns"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.toAdd}},[t._v("添加")])],1),t._v(" "),o("el-table",{attrs:{data:t.roles,size:"small"}},[o("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{icon:"el-icon-delete",type:"text",size:"small"},on:{click:function(o){return t.deleteHandler(e.row.id)}}},[t._v("移除")]),t._v(" "),o("el-button",{attrs:{icon:"el-icon-monitor",type:"text",size:"small"},on:{click:function(o){return t.toAuthorization(e.row)}}},[t._v("授权")])]}}])})],1),t._v(" "),o("el-dialog",{attrs:{title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"角色名称","label-width":"80px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveRoleHandler}},[t._v("确 定")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"授权",visible:t.authorization_visible},on:{"update:visible":function(e){t.authorization_visible=e}}},[o("el-form",{attrs:{model:t.role}},[o("el-form-item",{attrs:{label:"角色名称","label-width":"80px"}},[t._v("\n        "+t._s(t.role.name)+"\n      ")]),t._v(" "),o("el-form-item",{attrs:{label:"权限","label-width":"80px"}},[o("el-cascader-panel",{attrs:{options:t.options,props:t.props,filterable:""},model:{value:t.role.privileges,callback:function(e){t.$set(t.role,"privileges",e)},expression:"role.privileges"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.authorization_visible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.authorization}},[t._v("确 定")])],1)],1)],1)},i=[],r=(o("4634"),o("b775")),l=o("5ee4"),a=o.n(l),s={data:function(){return{form:{},visible:!1,authorization_visible:!1,title:"添加角色",role:{},roles:[],props:{multiple:!0,value:"id",label:"name",emitPath:!1,checkStrictly:!0},options:[]}},created:function(){this.loadRoles(),this.loadPrivileges()},methods:{authorization:function(){var t=this;r["a"].request({url:"/role/authorization",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a.a.stringify(this.role)}).then((function(e){t.authorization_visible=!1,t.$message({message:e.message,type:"success"}),t.loadRoles()}))},saveRoleHandler:function(){var t=this;r["a"].request({url:"http://localhost:6677/role/saveOrUpdate",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:a.a.stringify(this.form)}).then((function(e){t.visible=!1,t.$message({message:e.message,type:"success"}),t.loadRoles()}))},loadPrivileges:function(){var t=this;r["a"].get("http://localhost:6677/privilege/findPrivilegeTree").then((function(e){t.options=e.data}))},toAdd:function(){this.visible=!0},loadRoles:function(){var t=this;r["a"].get("http://localhost:6677/role/cascadePrivilegeFindAll").then((function(e){e.data.forEach((function(t){t.privileges=t.privileges.map((function(t){return t.id}))})),t.roles=e.data}))},deleteHandler:function(t){var e=this;this.loadRoles(),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r["a"].get("http://localhost:6677/role/deleteById?id="+t).then((function(t){e.$message({type:"success",message:t.message}),e.loadRoles()}))}))},toAuthorization:function(t){this.role=t,this.authorization_visible=!0}}},c=s,u=o("4e82"),p=Object(u["a"])(c,n,i,!1,null,null,null);e["default"]=p.exports}}]);