(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85fd5966"],{"2bb8":function(e,t,o){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,o,l){return t=t||"&",o=o||"=",null===e&&(e=void 0),"object"===typeof e?r(a(e),(function(a){var l=encodeURIComponent(n(a))+o;return i(e[a])?r(e[a],(function(e){return l+encodeURIComponent(n(e))})).join(t):l+encodeURIComponent(n(e[a]))})).join(t):l?encodeURIComponent(n(l))+o+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function r(e,t){if(e.map)return e.map(t);for(var o=[],n=0;n<e.length;n++)o.push(t(e[n],n));return o}var a=Object.keys||function(e){var t=[];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.push(o);return t}},"5ee4":function(e,t,o){"use strict";t.decode=t.parse=o("a2d3"),t.encode=t.stringify=o("2bb8")},a2d3:function(e,t,o){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,o,r){t=t||"&",o=o||"=";var a={};if("string"!==typeof e||0===e.length)return a;var l=/\+/g;e=e.split(t);var s=1e3;r&&"number"===typeof r.maxKeys&&(s=r.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var u=0;u<c;++u){var p,d,f,v,m=e[u].replace(l,"%20"),b=m.indexOf(o);b>=0?(p=m.substr(0,b),d=m.substr(b+1)):(p=m,d=""),f=decodeURIComponent(p),v=decodeURIComponent(d),n(a,f)?i(a[f])?a[f].push(v):a[f]=[a[f],v]:a[f]=v}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},f946:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"role_list"},[o("div",{staticClass:"btns"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.toAdd}},[e._v("添加")])],1),e._v(" "),o("el-table",{attrs:{data:e.roles,size:"small"}},[o("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{icon:"el-icon-delete",type:"text",size:"small"},on:{click:function(o){return e.deleteHandler(t.row.id)}}},[e._v("移除")]),e._v(" "),o("el-button",{attrs:{icon:"el-icon-monitor",type:"text",size:"small"},on:{click:function(o){return e.toAuthorization(t.row)}}},[e._v("授权")])]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:e.title,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"角色名称","label-width":"80px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveRoleHandler}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"授权",visible:e.authorization_visible},on:{"update:visible":function(t){e.authorization_visible=t}}},[o("el-form",{attrs:{model:e.role}},[o("el-form-item",{attrs:{label:"角色名称","label-width":"80px"}},[e._v("\n        "+e._s(e.role.name)+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"权限","label-width":"80px"}},[o("el-cascader-panel",{attrs:{options:e.options,props:e.props,filterable:""},model:{value:e.role.privileges,callback:function(t){e.$set(e.role,"privileges",t)},expression:"role.privileges"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:function(t){e.authorization_visible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.authorization}},[e._v("确 定")])],1)],1)],1)},i=[],r=(o("4634"),o("b775")),a=o("5ee4"),l=o.n(a),s={data:function(){return{form:{},visible:!1,authorization_visible:!1,title:"添加角色",role:{},roles:[],props:{multiple:!0,value:"id",label:"name",emitPath:!1,checkStrictly:!0},options:[]}},created:function(){this.loadRoles(),this.loadPrivileges()},methods:{authorization:function(){var e=this;r["a"].request({url:"/role/authorization",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:l.a.stringify(this.role)}).then((function(t){e.authorization_visible=!1,e.$message({message:t.message,type:"success"}),e.loadRoles()}))},saveRoleHandler:function(){var e=this;r["a"].request({url:"/role/saveOrUpdate",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:l.a.stringify(this.form)}).then((function(t){e.visible=!1,e.$message({message:t.message,type:"success"}),e.loadRoles()}))},loadPrivileges:function(){var e=this;r["a"].get("/privilege/findPrivilegeTree").then((function(t){e.options=t.data}))},toAdd:function(){this.visible=!0},loadRoles:function(){var e=this;r["a"].get("/role/cascadePrivilegeFindAll").then((function(t){t.data.forEach((function(e){e.privileges=e.privileges.map((function(e){return e.id}))})),e.roles=t.data}))},deleteHandler:function(e){var t=this;this.loadRoles(),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r["a"].get("/role/deleteById?id="+e).then((function(e){t.$message({type:"success",message:e.message}),t.loadRoles()}))}))},toAuthorization:function(e){this.role=e,this.authorization_visible=!0}}},c=s,u=o("4e82"),p=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=p.exports}}]);